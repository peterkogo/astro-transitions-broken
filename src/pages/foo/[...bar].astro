---
import { slide, fade } from "astro:transitions";

import Layout from "../../layouts/Layout.astro";
import Overlay from "../../components/Overlay.astro";
import Persistent from "../../components/Persistent";

import type { GetStaticPaths } from "astro";
export const getStaticPaths = (() => {
  return [{ params: { bar: "bar" } }, { params: { bar: undefined } }];
}) satisfies GetStaticPaths;

// This is a custom animation
const anim = {
  old: {
    name: "flyInOut",
    duration: "1s",
    easing: "linear",
    fillMode: "forwards",
  },
  new: {
    name: "flyInOut",
    duration: "1s",
    direction: "reverse",
    easing: "linear",
    fillMode: "forwards",
  },
};

const myFade = {
  forwards: anim,
  backwards: anim,
};
---

<style>
  @keyframes flyInOut {
    from {
      transform: translateY(0%);
    }
    to {
      transform: translateY(100%);
    }
  }
</style>

<Layout title="This does not work" transition:name="layout">
  <Persistent transition:name="persistent" transition:persist client:load />
  {
    Astro.params.bar && (
      <Overlay transition:name="overlay" transition:animate={myFade} />
    )
  }
</Layout>
